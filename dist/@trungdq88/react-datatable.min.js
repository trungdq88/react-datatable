!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.DataTable=e()}}(function(){return function e(t,a,r){function n(i,o){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!o&&l)return l(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return n(a?a:e)},c,c.exports,e,t,a,r)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=e("event-emitter"),o=r(i),l=function(){function e(t){n(this,e),this.DEFAULT_PER_PAGE=10,this.name=t,this.data=[],this._event=(0,o["default"])({}),this.extraParams={},this.extraColums=[]}return s(e,[{key:"fetch",value:function(){console.error("Not implemented!")}},{key:"getFields",value:function(){console.error("Not implemented!")}},{key:"get",value:function(){return this.data}},{key:"bind",value:function(){this._event.on.apply(this._event,arguments)}},{key:"unbind",value:function(){this._event.off.apply(this._event,arguments)}},{key:"trigger",value:function(){this._event.emit.apply(this._event,arguments)}},{key:"getFields",value:function(){return this.entity.listFields.concat(this.extraColums)}},{key:"setExtraColumns",value:function(e){this.extraColums=e}},{key:"setExtraParams",value:function(e){this.extraParams=e}}]),e}();a["default"]=l,t.exports=a["default"]},{"event-emitter":void 0}],2:[function(e,t,a){(function(r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function(e,t,a){for(var r=!0;r;){var n=e,s=t,i=a;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,s);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=s,a=i,r=!0,o=u=void 0}},u="undefined"!=typeof window?window.React:"undefined"!=typeof r?r.React:null,c=n(u),f="undefined"!=typeof window?window.classNames:"undefined"!=typeof r?r.classNames:null,d=n(f),h=e("./FriendlyLoader.js"),p=n(h),y=e("./DataSource"),m=n(y),g=function(e){function t(){s(this,t);for(var e=arguments.length,a=Array(e),r=0;e>r;r++)a[r]=arguments[r];l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,a),this.DEFAULT_PER_PAGE=10,this.PAGES_BEFORE=3,this.PAGES_AFTER=4,this.state={total:0,entities:[],doneLoading:!1,page:1,perpage:this.props.perpage||this.DEFAULT_PER_PAGE,search:void 0,sortProperty:void 0,sortOrderDesc:!0,filter:{},failed:!1},this.dataSource=this.props.dataSource,this.props.query&&this.setFilter(this.props.query),this.onDataChange=this._onDataChange.bind(this),this.onDataFailed=this._onDataFailed.bind(this)}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.dataSource.bind("change",this.onDataChange),this.dataSource.bind("failed",this.onDataFailed),this.fetch()}},{key:"componentWillUnmount",value:function(){this.dataSource.unbind("change",this.onDataChange),this.dataSource.unbind("failed",this.onDataFailed)}},{key:"onKeyDown",value:function(e){13===e.nativeEvent.keyCode&&this.search()}},{key:"setFilter",value:function(e){this.state.page=e.page,this.state.search=e.search,this.state.perpage=e.perpage,this.state.sortProperty=e.sortProperty,this.state.sortOrderDesc=e.sortOrderDesc,this.state.filter=e.filter}},{key:"getFilterQuery",value:function(){return{page:this.state.page,search:this.state.search,perpage:this.state.perpage,sortProperty:this.state.sortProperty,sortOrderDesc:this.state.sortOrderDesc,filter:this.state.filter}}},{key:"isFilterQueryChanged",value:function(){return!(1===this.state.page&&void 0===this.state.search&&this.state.perpage===this.DEFAULT_PER_PAGE&&void 0===this.state.sortProperty&&this.state.sortOrderDesc===!0&&0===Object.keys(this.state.filter).length)}},{key:"fetch",value:function(){this.dataSource.fetch(this.state.page,this.state.search,this.state.sortProperty,this.state.sortOrderDesc,this.state.filter,this.state.perpage)}},{key:"_onDataChange",value:function(){var e=this.dataSource.get();this.state.total=e.total,this.state.entities=e.entities,this.state.page=e.page,this.state.perpage=e.perpage,this.state.search=e.search,this.state.sortProperty=e.sortProperty,this.state.sortOrderDesc=e.sortOrderDesc,this.setState({doneLoading:!0}),this.isFilterQueryChanged()&&this.props.onQueryChange&&this.props.onQueryChange(this.getFilterQuery())}},{key:"_onDataFailed",value:function(){this.setState({failed:!0})}},{key:"search",value:function(){this.state.doneLoading=!1,this.state.page=1,this.forceUpdate(),this.fetch()}},{key:"sort",value:function(e,t){t&&(this.state.sortProperty===e?this.state.sortOrderDesc===!1?this.state.sortOrderDesc=!0:this.state.sortOrderDesc===!0?this.state.sortOrderDesc=null:null===this.state.sortOrderDesc&&(this.state.sortOrderDesc=!1):this.state.sortOrderDesc=!1,this.state.sortProperty=e,this.state.doneLoading=!1,this.forceUpdate(),this.fetch())}},{key:"goToPage",value:function(e){this.state.page=e,this.setState({doneLoading:!1,page:e}),this.fetch()}},{key:"changeSearchKeyword",value:function(e){this.setState({search:e.target.value})}},{key:"filter",value:function(e,t){e&&(void 0===t?delete this.state.filter[e]:this.state.filter[e]=t,this.state.doneLoading=!1,this.state.page=1,this.forceUpdate(),this.fetch())}},{key:"renderSearchbox",value:function(){var e="Search...";return this.dataSource.entity.searchFields&&(e="Search "+this.dataSource.entity.searchFields.join(", ").replace(/_/g," ")+"..."),c["default"].createElement("div",{className:"input-group search-box"},c["default"].createElement("input",{type:"search",className:"form-control",placeholder:e,value:this.state.search,onChange:this.changeSearchKeyword.bind(this),onKeyPress:this.onKeyDown.bind(this)}),c["default"].createElement("span",{className:"input-group-btn"},c["default"].createElement("button",{className:"btn btn-primary btn-block",onClick:this.search.bind(this)},c["default"].createElement("i",{className:"fa fa-search"}))))}},{key:"renderPaging",value:function(){var e=[],t=void 0!==this.state.total?Math.ceil(this.state.total/this.state.perpage):this.state.page+1;if(1>=t)return"";this.state.page>this.PAGES_BEFORE+1&&e.push(c["default"].createElement("li",{key:"pageLink0"},c["default"].createElement("a",{onClick:this.goToPage.bind(this,1)},"First")));for(var a=this.state.page-this.PAGES_BEFORE;a<this.state.page+this.PAGES_AFTER;a++)a>=1&&t>=a&&(a===this.state.page?e.push(c["default"].createElement("li",{key:"pageLink"+a,className:"active"},c["default"].createElement("a",null,a))):e.push(c["default"].createElement("li",{key:"pageLink"+a},c["default"].createElement("a",{onClick:this.goToPage.bind(this,a)},a))));return this.state.page<t-this.PAGES_AFTER+1&&e.push(c["default"].createElement("li",{key:"pageLink"+t},c["default"].createElement("a",{onClick:this.goToPage.bind(this,t)},"Last"))),c["default"].createElement("nav",{className:"text-right"},c["default"].createElement("ul",{className:"pagination"},e))}},{key:"render",value:function(){var e=this,t=this.dataSource.getFields(),a=this.state.entities.map(function(a,r){var n=t.map(function(t,n){var s=t[1],i=void 0;return"string"==typeof s?i=a[s]:"object"==typeof s&&(i=s.transform.bind(a)(a[s.field])),c["default"].createElement("td",{key:e.dataSource.name+"_"+r+"_"+n},i)});return c["default"].createElement("tr",{key:e.dataSource.name+r},c["default"].createElement("td",null,(e.state.page-1)*e.state.perpage+r+1),n)}),r=t.map(function(t,a){var r=t[0],n="string"==typeof t[1]?t[1]:t[1].field,s=void 0===t[2],i=void 0!==t[3],o=e.props.sortable&&s,l=void 0;o&&(l=e.state.sortProperty===n&&null!==e.state.sortOrderDesc?e.state.sortOrderDesc?c["default"].createElement("i",{className:"fa fa-sort-desc"}):c["default"].createElement("i",{className:"fa fa-sort-asc"}):c["default"].createElement("i",{className:"fa fa-sort"}));var u=void 0;if(i){var f=t[3].getDataAsArray().map(function(t){return c["default"].createElement("li",{key:"filter-value-"+n+"-"+t.id},c["default"].createElement("a",{onClick:e.filter.bind(e,n,t.id)},e.state.filter[n]===t.id?c["default"].createElement("i",{className:"fa fa-dot-circle-o"}):c["default"].createElement("i",{className:"fa fa-circle-o"})," ",t.label))});u=c["default"].createElement("div",{className:"btn-group"},c["default"].createElement("button",{type:"button",className:"btn btn-xs dropdown-toggle "+(void 0===e.state.filter[n]?"btn-default":"btn-success"),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c["default"].createElement("i",{className:"fa fa-filter"})),c["default"].createElement("ul",{className:"dropdown-menu"},c["default"].createElement("li",null,c["default"].createElement("a",{onClick:e.filter.bind(e,n,void 0)},c["default"].createElement("i",{className:"fa fa-times"})," No filter")),c["default"].createElement("li",{role:"separator",className:"divider"}),f))}return c["default"].createElement("th",{key:e.dataSource.name+"th"+a,className:"has-filter-"+(i?"true":"")},c["default"].createElement("span",{className:"pull-right"},u),c["default"].createElement("span",{className:"sort-icon",onClick:e.sort.bind(e,n,o)},r," ",l))});return c["default"].createElement("div",{className:"react-datatable"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-sm-8"}),c["default"].createElement("div",{className:"col-sm-4"},this.props.searchable?this.renderSearchbox():"")),c["default"].createElement("table",{className:(0,d["default"])("table table-bordered table-striped",{sortable:this.props.sortable}),id:this.props.id},c["default"].createElement("thead",null,c["default"].createElement("tr",null,c["default"].createElement("th",null,"#"),r)),c["default"].createElement("tbody",null,this.state.entities.length>0?a:c["default"].createElement("tr",null,c["default"].createElement("td",{className:"text-center",colSpan:r.length+1},this.state.doneLoading?"This list is empty":"")))),c["default"].createElement("div",{className:(0,d["default"])("overlay-all",{hide:this.state.doneLoading})},c["default"].createElement(p["default"],{key:"loader-"+this.state.failed,failed:this.state.failed})),this.renderPaging())}}]),t}(c["default"].Component);g.DataSource=m["default"],a["default"]=g,t.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DataSource":1,"./FriendlyLoader.js":3}],3:[function(e,t,a){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=function(e,t,a){for(var r=!0;r;){var n=e,s=t,i=a;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,s);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=s,a=i,r=!0,o=u=void 0}},l="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,u=r(l),c=function(e){function t(){var e=this;n(this,t);for(var a=arguments.length,r=Array(a),s=0;a>s;s++)r[s]=arguments[s];o(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,r),this.state={failed:this.props.failed||!1},this.lastSay="",this.says=["Be patient, your data is coming...","Getting data, just for you. Hang tight...","Please wait...","Loading your data..."],window.addEventListener("error",function(){e.setState({failed:!0})})}return s(t,e),i(t,[{key:"render",value:function(){if(this.state.failed)return u["default"].createElement("div",null,u["default"].createElement("i",{className:"fa fa-frown-o"}),u["default"].createElement("h5",null,"Oops! Something went wrong, please contact admin."));for(var e=this.says[Math.floor(Math.random()*this.says.length)];e===this.lastSay;)e=this.says[Math.floor(Math.random()*this.says.length)];return this.lastSay=e,u["default"].createElement("div",null,u["default"].createElement("i",{className:"fa fa-refresh fa-spin"}),u["default"].createElement("h5",{className:"delay-showing"},this.props.message||e))}}]),t}(u["default"].Component);a["default"]=c,t.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)});